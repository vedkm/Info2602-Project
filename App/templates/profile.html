<!-- temporary file -->
{% extends "layout.html" %}
{% block title %}Login{% endblock %}
{% block page %}{{current_user.shopName}}{% endblock %}

{{ super() }}

{% block content %}

<div style="display:grid;">
  <div style="height:300px;">
  <div >
    <div class = "white-text">Profile Picture:<img class="responsive-img"></div>
  </div>

  <div>
    <div class = "white-text">Name:</div>
  </div>

  <div >
    <div class = "white-text">
      ID:
    </div>
  </div>
</div>
{% if current_user.is_authenticated and current_user.id == profileID %}
<div style = "height:100vh; ">
  <div >
    <a href="/listing">
      <button class = "black-text">CREATE LISTING</button>
    </a>
  </div>
  {% endif %}
  
  
  <div class="index-banner color2 " >
    <div class="row" style="margin-top: 70px;">

      <div class="col s10 offset-s1">
        {% for ele in data %}
          <!-- <a class = "card mall" href="../listing/{{ele.listing['id']}}">{{ele.listing['name']}}</a> -->
            <!-- <div class="row"> -->
              <div class="col s12">
                <div class="card blue-grey darken-1 truncate">
                  <a href="../listing/{{ele.listing['id']}}">{{ele.listing['html']|safe}}</a>
                  <div class="card-action">
                    <a href="../listing/{{ele.listing['id']}}">{{ele.listing['name']}}</a>
                    <a href="../profile/{{ele.farmer['id']}}">{{ele.farmer['shopName']}}</a>
                    {% if current_user.is_authenticated and current_user.id == profileID %}
                    <button class="btn-floating waves-effect waves-light red right" onclick="deleteListing(`{{ele.listing['id']}}`)">
                      <i class="material-icons">delete</i>
                    </button>
                    {% endif %}
                  </div>
                </div>
              </div>
            <!-- </div> -->
          </a>
        {% endfor %}
                    <script>
                      function deleteListing(id) {
                        if (!id) return
                          fetch("../listing/"+id, {
                            method: 'DELETE'
                          })
                          .then((r) => {
                            document.location.reload()
                          })
                      }
                    </script>
      </div>
    </div>
</div>
</div>
  
{% endblock %}




