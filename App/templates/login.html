{% extends "layout.html" %}
{% block title %}Login{% endblock %}
{% block page %}Login{% endblock %}

{{ super() }}

{% block content %}

    <!-- <input type="button" onclick="login()"> -->

    {% if current_user.is_authenticated %}
        Hi {{ current_user.toDict() }}
    {% else %}
        <script type="text/javascript">
            function login() {
                fetch("/login", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        'username': 'bob',
                        'password': 'bobpass'
                    })
                })
                .then(data => {
                    console.log(data)
                })
                .catch(e => {
                    console.log(e)
                })
            }
            login()
        </script>
    {% endif %}
        
    

{% endblock %}