{% extends "layout.html" %}
{% block title %}CornHub{% endblock %}
{% block page %}CornHub{% endblock %}

{{ super() }}

{% block content %}

<!-- listings contains all listings in the database -->
<!-- {{listings}} -->

<!-- <div class="index-banner color2 container" style="height:100vh; overflow:scroll; overflow-x: hidden;" > -->
  <div class="index-banner color2 " style="height:100vh; overflow:scroll; overflow-x: hidden;" >
    <div class="row" style="margin-top: 70px;">
      <div class="col s10 offset-s1">
        {% for listing in listings %}
          <!-- <a class = "card mall" href="../listing/{{listing['id']}}">{{listing['name']}}</a> -->
            <!-- <div class="row"> -->
              <div class="col s12">
                <div class="card blue-grey darken-1 card-image truncate">
                  <!-- <a href="../listing/{{listing['id']}}">{{listing['html']|safe}}</a> -->
                  {{listing['html']|safe}}
                  <!-- <div class="card-content white-text truncate">
                  </div> -->
                  <div class="card-action">
                    <!-- <button onclick="deleteListing(`{{listing['id']}}`)">Delete</button> -->
                    <a href="../listing/{{listing['id']}}">{{listing['name']}}</a>
                  </div>
                </div>
              </div>
            <!-- </div> -->
          </a>
        {% endfor %}
                    <script>
                      function deleteListing(id) {
                        if (!id) return
                          fetch("../listing/"+id, {
                            method: 'DELETE'
                          }) 
                          // console.log(id)
                      }
                    </script>
      </div>
    </div>
  
</div>



    
{% endblock %}

